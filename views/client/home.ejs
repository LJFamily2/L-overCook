<div class="ingredient-filter">
  <h3>Ingredient Filter</h3>
  <% Object.entries(ingredients).forEach(([category, ingredientsList]) => { %>
      <div class="ingredients">
          <div class="ingredient-header">
              <img src="/images/vegetableIcon.png" alt="vegetable icon" />
              <span><%= category %></span>
          </div>
          <% const maxVisibleIngredients =4; %>
          <% ingredientsList.forEach((ingredient, index) => { %>
              <button type="button" class="ingredient <%= index + 1 > maxVisibleIngredients ? 'hidden' : '' %>"><%= ingredient %></button>
          <% }) %>
          <% if (ingredientsList.length > maxVisibleIngredients) { %>
              <button type="button" class="more-btn" data-max-visible="<%= maxVisibleIngredients %>">+ <%= ingredientsList.length - maxVisibleIngredients %> more</button>
          <% } %>
      </div>
  <% }) %>

<script>
  document.querySelectorAll('.more-btn').forEach(button => {
      button.addEventListener('click', () => {
          const parent = button.parentNode;
          const ingredients = parent.querySelectorAll('.ingredient');
          const isShowingMore = button.textContent.startsWith('+');
          const maxVisibleIngredients = parseInt(button.dataset.maxVisible);

          ingredients.forEach((ingredient, index) => {
              if (isShowingMore) {
                  ingredient.classList.remove('hidden');
                  button.textContent = `- Show less`;
              } else {
                  ingredient.classList.toggle('hidden', index + 1 > maxVisibleIngredients);
                  button.textContent = `+ ${ingredients.length - maxVisibleIngredients} more`;
              }
          });
      });
  });
</script>


   <!-- <div class="ingredients fruits">
        <div class="ingredient-header">
          <img src="/images/fruitsIcon.png" alt="fruit icon" />
          <span> Fruits </span>
        </div>
        <button type="button">Lemon</button>
        <button type="button">Apple</button>
        <button type="button">Peach</button>
        <button type="button">Banana</button>
        <button type="button">+ 90 more</button>
      </div> -->
</div>

<!-- Icon to show the ingredient filter when the screen is small -->
<div class="expand-icon-container">
   <img src="/images/expandShrink.png" class="expand-icon" />
</div>

<div id="main-content-container">
   <div id="main-content">
      <div id="search">
         <h2>Recipe Search</h2>
         <div id="search-bar">
            <button type="button">
               <i class="fa fa-search" aria-hidden="true"></i>
            </button>
            <input
               type="text"
               placeholder="Enter recipe name or ingredients you have..."
            />
         </div>
      </div>

      <div id="filter-row">
         <p>You can make <span id="num-of-recipes">25</span> recipes</p>
         <div class="filter-icon-container">
            <img
               class="filter-icon"
               src="/images/filterIcon.png"
               alt="filter-icon"
            />
         </div>
      </div>

      <div class="filter-criteria">
         <h3>Cuisine:</h3>
         <div>
            <% cuisines.forEach(cuisine => {%>
            <div>
               <input
                  type="checkbox"
                  id="<%= cuisine.name %>"
                  name="<%= cuisine.name %>"
               />
               <label for="<%= cuisine.name %> "> <%= cuisine.name %> </label>
            </div>
            <% }) %>
         </div>

         <h3>Cook time:</h3>
         <div>
            <div>
               <input type="checkbox" id="under-15" name="under-15" />
               <label for="under-15"> Under 15 mins </label>
            </div>
            <div>
               <input type="checkbox" id="15-30" name="15-30" />
               <label for="15-30"> 15 - 30 mins </label>
            </div>
            <div>
               <input type="checkbox" id="over-30" name="over-30" />
               <label for="over-30"> Over 30 mins </label>
            </div>
         </div>
      </div>

      <div id="results">
         <div id="recipes">
            <% recipes.forEach(recipe => { %>
            <div class="recipe">
               <div class="recipe-img-container">
                  <img class="recipe-img" src="/images/<%= recipe.image %>" />
               </div>

               <div class="first-row">
                  <div class="recipe-name" title="Tom Yum Soup">
                     <%= recipe.name %>
                  </div>
                  <img src="/images/emptyHeart.png" />
               </div>

               <div class="second-row">
                  <div class="cook-time">
                     <img src="/images/clock.png" />
                     <span><%= recipe.time %></span>
                  </div>
                  <div class="rating">
                     <span class="fa fa-star"></span>
                     <span class="fa fa-star"></span>
                     <span class="fa fa-star"></span>
                     <span class="fa fa-star"></span>
                     <span class="fa fa-star"></span>
                  </div>
               </div>
            </div>
            <% }) %>
         </div>
      </div>
   </div>

   <div class="pantry-icon">
      <img src="/images/basket.png" />
      <span id="num-of-ingredients"> 10 </span>
   </div>

   <div class="pantry-contents">
      <div class="pantry-title">
         <img src="/images/basket.png" />
         <span> My pantry </span>
      </div>

      <div class="pantry-list">
         <!-- Chỗ này đang hardcode, các cậu cho nó generate dynamic nha -->
         <div class="pantry-item">1. Egg</div>
         <div class="pantry-item">2. Milk</div>
         <div class="pantry-item">3. Tomato</div>
         <div class="pantry-item">4. Banana</div>
         <div class="pantry-item">5. Watermelon</div>
         <div class="pantry-item">6. Carrot</div>
         <div class="pantry-item">7. Onion</div>
         <div class="pantry-item">8. Potato</div>
         <div class="pantry-item">9. Pepper</div>
         <div class="pantry-item">10. Cucumber</div>
         <div class="pantry-item">11. Mushroom</div>
      </div>
   </div>
</div>

<script src="/js/clients/home.js"></script>
