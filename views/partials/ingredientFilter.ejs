<head>
  <!-- CSS -->
  <link rel="stylesheet" href="/css/partials/ingredientFilter.css" />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
  />
  <style>
    .hidden {
      display: none;
    }
  </style>
</head>

<div class="ingredient-filter">
  <h3>Ingredient Filter</h3>
  <% Object.entries(ingredients).forEach(([category, ingredientsList]) => { %>
  <div class="ingredients">
    <div class="ingredient-header">
      <img
        src="/uploadImages/<%= ingredientsList.categoryImage %>"
        alt="vegetable icon"
      />
      <span><%= category %></span>
      <div class="more-icon">
        <i class="bi bi-chevron-down" onclick="toggleChevron(this)"></i>
      </div>
    </div>
    <% const maxVisibleIngredients = 4; %> <%
    ingredientsList.forEach((ingredient, index) => { %>
    <button
      class="selectable-button <%= index >= maxVisibleIngredients ? 'hidden' : '' %>"
      id="<%= ingredient %>"
      onclick="toggleSelection(this)"
    >
      <span class="button-text"><%= ingredient %></span>
    </button>
    <% }) %> <% if (ingredientsList.length > maxVisibleIngredients) { %>
    <button
      type="button"
      class="more-btn"
      data-max-visible="<%= maxVisibleIngredients %>"
      onclick="showMore(this)"
    >
      + <%= ingredientsList.length - maxVisibleIngredients %> more
    </button>
    <% } %>
  </div>
  <% }) %>
</div>

<script src="/js/partials/ingredientFilter.js"></script>
