<head>
  <!-- CSS -->
  <link rel="stylesheet" href="/css/partials/ingredientFilter.css" />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
  />

  <!-- JS -->
  <script src="/js/partials/ingredientFilter.js" defer></script>

  <style>
    .hidden {
      display: none;
    }
  </style>
</head>

<div class="ingredient-filter">
  <h3>Ingredient Filter</h3>
  <% Object.entries(ingredients).forEach(([category, categoryData]) => { %>
  <div class="ingredients">
    <div class="ingredient-header">
      <img src="<%= categoryData.image %>" alt="category icon" />
      <span><%= category %></span>
      <div class="more-icon">
        <i class="bi bi-chevron-down" onclick="toggleChevron(this)"></i>
      </div>
    </div>
    <% const maxVisibleIngredients = 4; %> <%
    categoryData.ingredients.forEach((ingredient, index) => { %>
    <button
      class="selectable-button <%= index >= maxVisibleIngredients ? 'hidden' : '' %>"
      id="<%= ingredient %>"
      onclick="toggleSelection(this); filterRecipes()"
    >
      <span class="button-text"><%= ingredient %></span>
    </button>
    <% }) %> <% if (categoryData.ingredients.length > maxVisibleIngredients) {
    %>
    <button
      type="button"
      class="more-btn"
      data-max-visible="<%= maxVisibleIngredients %>"
      onclick="displayAllIngredients(this)"
    >
      + <%= categoryData.ingredients.length - maxVisibleIngredients %> more
    </button>
    <button
      type="button"
      class="less-btn hidden"
      data-max-visible="<%= maxVisibleIngredients %>"
      onclick="hideIngredients(this)"
    >
      Show less
    </button>
    <% } %>
  </div>
  <% }) %>
</div>

<div class="expand-icon">
  <img src="/images/expandShrink.png" />
</div>
